<%= render "reports/months/table_style" rescue nil %> <!-- 既存のスタイルを使い回し（なければ無視されます） -->

<div class="nav" style="margin:8px 0;">
  <%= link_to "◀ 古い月へ", { employee_id: @employee.id, page: (params[:page].to_i + 1) }, class: "btn" %>
  <%= link_to "新しい月へ ▶", { employee_id: @employee.id, page: [params[:page].to_i - 1, 0].max }, class: "btn" %>
</div>

<p>対象社員：<strong><%= @employee.code %></strong> <%= @employee.name %></p>

<style>
  .report.compact .badge {
    display:inline-block; margin-left:.4rem; padding:.05rem .35rem;
    font-size:.75em; border-radius:.5rem; background:#eee; color:#555;
  }
  .report.compact .time-col  .badge { background:#dff0ff; color:#116; }
  .report.compact .money-col .badge { background:#e8f6e5; color:#163; }
</style>

<table class="report compact">
  <thead>
    <tr>
      <th class="rowh">項目</th>
      <% @periods.each do |p| %>
        <th><%= "#{p.year}年#{p.month}月" %></th>
      <% end %>
    </tr>
  </thead>
  <tbody>
    <% @items.each do |item| %>
      <tr>
        <th class="rowh">
          <%= item.name %>
          <span class="badge"><%= item.above_basic ? "時間" : "金額" %></span>
        </th>
        <% @periods.each do |per| %>
          <% cell = @cell_map[[per.id, item.id]] %>
          <td class="<%= item.above_basic ? 'time-col' : 'money-col' %>">
            <%= display_cell(cell, item: item) %>
          </td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

